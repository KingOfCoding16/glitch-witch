{"entries":[{"timestamp":1763502910373,"editorVersion":"2.0.62","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":2579,"diffs":[[1,"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <variables></variables>\n  <block type=\"pxt-on-start\" x=\"0\" y=\"0\"></block>\n</xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":2120,"diffs":[[1," "]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":209,"length1":35,"diffs":[[1,"    \"additionalFilePaths\": []\n"]]}]}]},{"timestamp":1763503865567,"editorVersion":"2.0.62","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":209,"length1":31,"diffs":[[1,"    \"preferredEditor\": \"blocksprj\"\n"]]}]}]},{"timestamp":1763584007314,"editorVersion":"2.0.62","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":209,"length1":35,"diffs":[[1,"    \"preferredEditor\": \"tsprj\"\n"]]}]}]},{"timestamp":1763584061296,"editorVersion":"2.0.62","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":84,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"music_playable_play\"><field name=\"playbackMode\">music.PlaybackMode.LoopingInBackground</field><value name=\"toPlay\"><shadow type=\"music_melody_playable\"><field name=\"melody\">music.baDing</field></shadow><block type=\"music_song_field_editor\"><field name=\"song\">hex`0078000408020403001c0001dc00690000045e010004000000000000000000000564000104000370000000040002191d0400080002191d08000c0002191d0c001000021b1e10001400021b1e14001800021d2018001c00021e221c002000021e2220002400021d2024002800021d2028002c00021b1e2c003000021b1e30003400021d2034003800021d2038003c00021d203c004000021e2206001c00010a006400f4016400000400000000000000000000000000000000024d000000040002222508000c000224270c0010000225291400180002252918001c000225292000240002242728002c000225292c00300002272a3400380002272a38003c0002272a3c00400002252907001c00020a006400f401640000040000000000000000000000000000000003600000000400011204000800011408000c0001140c001000011210001400011114001800010f18001c00010f1c002000011120002400011224002800011428002c0001142c003000011230003400011134003800010f38003c00010f3c004000011109010e02026400000403780000040a000301000000640001c80000040100000000640001640000040100000000fa0004af00000401c80000040a00019600000414000501006400140005010000002c0104dc00000401fa0000040a0001c8000004140005d0076400140005d0070000c800029001f40105c201f4010a0005900114001400039001000005c201f4010500058403050032000584030000fa00049001000005c201f4010500058403c80032000584030500640005840300009001049001000005c201f4010500058403c80064000584030500c8000584030000f40105ac0d000404a00f00000a0004ac0d2003010004a00f0000280004ac0d9001010004a00f0000280002d00700040408070f0064000408070000c80003c800c8000e7d00c80019000e64000f0032000e78000000fa00032c01c8000ee100c80019000ec8000f0032000edc000000fa0003f401c8000ea901c80019000e90010f0032000ea4010000fa0001c8000004014b000000c800012c01000401c8000000c8000190010004012c010000c80002c800000404c8000f0064000496000000c80002c2010004045e010f006400042c010000640002c409000404c4096400960004f6090000f40102b80b000404b80b64002c0104f40b0000f401022003000004200300040a000420030000ea01029001000004900100040a000490010000900102d007000410d0076400960010d0070000c80060000000010001130400050001130800090001110c000d0001111000110001111400150001121800190001131c001d0001142000210001142400250001142800290001122c002d00011130003100011134003500011038003900010f3c003d000114`</field><data>{\"commentRefs\":[],\"fieldData\":{\"song\":null}}</data></block></value></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":2482,"diffs":[[1,"music.play(music.createSong(hex`0078000408020403001c0001dc00690000045e010004000000000000000000000564000104000370000000040002191d0400080002191d08000c0002191d0c001000021b1e10001400021b1e14001800021d2018001c00021e221c002000021e2220002400021d2024002800021d2028002c00021b1e2c003000021b1e30003400021d2034003800021d2038003c00021d203c004000021e2206001c00010a006400f4016400000400000000000000000000000000000000024d000000040002222508000c000224270c0010000225291400180002252918001c000225292000240002242728002c000225292c00300002272a3400380002272a38003c0002272a3c00400002252907001c00020a006400f401640000040000000000000000000000000000000003600000000400011204000800011408000c0001140c001000011210001400011114001800010f18001c00010f1c002000011120002400011224002800011428002c0001142c003000011230003400011134003800010f38003c00010f3c004000011109010e02026400000403780000040a000301000000640001c80000040100000000640001640000040100000000fa0004af00000401c80000040a00019600000414000501006400140005010000002c0104dc00000401fa0000040a0001c8000004140005d0076400140005d0070000c800029001f40105c201f4010a0005900114001400039001000005c201f4010500058403050032000584030000fa00049001000005c201f4010500058403c80032000584030500640005840300009001049001000005c201f4010500058403c80064000584030500c8000584030000f40105ac0d000404a00f00000a0004ac0d2003010004a00f0000280004ac0d9001010004a00f0000280002d00700040408070f0064000408070000c80003c800c8000e7d00c80019000e64000f0032000e78000000fa00032c01c8000ee100c80019000ec8000f0032000edc000000fa0003f401c8000ea901c80019000e90010f0032000ea4010000fa0001c8000004014b000000c800012c01000401c8000000c8000190010004012c010000c80002c800000404c8000f0064000496000000c80002c2010004045e010f006400042c010000640002c409000404c4096400960004f6090000f40102b80b000404b80b64002c0104f40b0000f401022003000004200300040a000420030000ea01029001000004900100040a000490010000900102d007000410d0076400960010d0070000c80060000000010001130400050001130800090001110c000d0001111000110001111400150001121800190001131c001d0001142000210001142400250001142800290001122c002d00011130003100011134003500011038003900010f3c003d000114`), music.PlaybackMode.LoopingInBackground)\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":180,"length1":48,"diffs":[[1,"        \"assets.json\"\n"]]},{"start1":209,"length1":75,"diffs":[[1,"    \"preferredEditor\": \"blocksprj\"\n"]]}]},{"type":"added","filename":"test.ts","value":"// tests go here; this will not be compiled when this package is used as an extension.\n"},{"type":"added","filename":"melmer-mumm.ts","value":"\n//% color=#cf6a87\n//% weight=79.5\n//% icon=\"\\uf004\"\n//% blockGap=8\n//% block=\"Profile Life\"\nnamespace profilelife {\n    const profileLifeKey = \"PROFILE_LIFE_SCENE_KEY\";\n\n    /**\n     * TODOs:\n     * * support a 'break after' on max life to move to new line for zelda style (multi row life)\n     * * support partial hearts? e.g. make it so they can pass an array of images separate for filledLifeImage,\n     *     and then each life becomes 1/array.length hearts\n     * * support positioning the renderable -- e.g. peg to corner of the screen with an offset\n     */\n\n    class ProfileState {\n        profileImage: Image;\n        filledLifeImage: Image;\n        emptyLifeImage: Image;\n        name: string;\n        font: image.Font;\n        textColor: number;\n        backgroundColor: number;\n        borderColor: number;\n        maxLife: number;\n        invisible: boolean;\n\n        constructor() {\n            this.filledLifeImage = img`\n                . c c . c c .\n                c 3 3 c 3 3 c\n                c 3 3 3 1 3 c\n                f 3 2 2 2 3 f\n                f f 2 2 2 f f\n                . f f 2 f f .\n                . . f f f . .\n            `;\n            this.emptyLifeImage = img`\n                . c c . c c .\n                c b b c b b c\n                c b b b b b c\n                f b c c c b f\n                f f c c c f f\n                . f f c f f .\n                . . f f f . .\n            `;\n            this.maxLife = 3;\n            this.font = image.font5;\n            this.textColor = 0xC;\n            this.backgroundColor = 0x0;\n            this.borderColor = 0x0;\n        }\n    }\n\n    function getState(): ProfileState {\n        return game.currentScene().data[profileLifeKey] as ProfileState;\n    }\n\n    function init(): ProfileState {\n        const scn = game.currentScene();\n        let profileState = scn.data[profileLifeKey]\n        if (profileState)\n            return profileState;\n\n        profileState = game.currentScene().data[profileLifeKey] = new ProfileState();\n\n        scene.createRenderable(95, function (target: Image, camera: scene.Camera) {\n            const state = getState();\n            if (!state || state.invisible)\n                return;\n\n            if (state.backgroundColor || state.borderColor) {\n                let fullWidth = 3;\n                if (state.profileImage) fullWidth += state.profileImage.width;\n                fullWidth += Math.max(\n                    (state.name || \"\").length * state.font.charWidth,\n                    state.maxLife * (1 + Math.max(\n                        state.filledLifeImage.width,\n                        state.emptyLifeImage ? state.emptyLifeImage.width : 0\n                    ))\n                );\n                let fullHeight = Math.max(\n                    state.profileImage ? state.profileImage.height : 0,\n                    (state.name ? state.font.charHeight + 2 : 0) + Math.max(\n                        state.filledLifeImage.height,\n                        state.emptyLifeImage ? state.emptyLifeImage.height : 0\n                    ) + 4\n                )\n\n                if (state.backgroundColor)\n                    target.fillRect(0, 0, fullWidth, fullHeight, state.backgroundColor);\n                if (state.borderColor) {\n                    target.drawRect(-1, -1, fullWidth + 2, fullHeight + 2, state.borderColor);\n                }\n            }\n\n\n            const currLife = info.life();\n\n            info.showLife(false)\n\n            if (currLife > state.maxLife) {\n                info.setLife(state.maxLife);\n            } else if (currLife < 0) {\n                info.setLife(0);\n            }\n\n            let leftOffset = 2;\n            let topOffset = 2;\n\n            if (state.profileImage) {\n                target.drawTransparentImage(state.profileImage, 0, 0);\n                leftOffset += state.profileImage.width;\n            }\n\n            if (state.name) {\n                target.print(state.name, leftOffset, topOffset, state.textColor, state.font);\n                topOffset += state.font.charHeight + 2;\n            }\n\n            for (let i = 0; i < state.maxLife; i++) {\n                if (i < currLife) {\n                    target.drawTransparentImage(\n                        state.filledLifeImage,\n                        leftOffset + i * (state.filledLifeImage.width + 1),\n                        topOffset\n                    );\n                } else if (state.emptyLifeImage) {\n                    const filledLifeWidth = currLife * (state.filledLifeImage.width + 1);\n\n                    target.drawTransparentImage(\n                        state.emptyLifeImage,\n                        leftOffset + (i - currLife) * (state.emptyLifeImage.width + 1) + filledLifeWidth,\n                        topOffset\n                    );\n                }\n            }\n        });\n\n        return profileState;\n    }\n\n    //% block=\"set profile image $profile\"\n    //% blockId=\"profilelife_profileImage\"\n    //% profile.shadow=screen_image_picker\n    //% weight=100\n    export function setProfileImage(profile: Image) {\n        const state = init();\n        state.profileImage = profile;\n    }\n\n    //% block=\"set filled life image $filledImage\"\n    //% blockId=\"profilelife_filledImage\"\n    //% filledImage.shadow=screen_image_picker\n    //% weight=40\n    export function setFilledLifeImage(filledImage: Image) {\n        if (!filledImage)\n            return;\n        const state = init();\n        state.filledLifeImage = filledImage;\n    }\n\n    //% block=\"set empty life image $emptyImage\"\n    //% blockId=\"profilelife_emptyImg\"\n    //% emptyImage.shadow=screen_image_picker\n    //% weight=30\n    export function setEmptyLifeImage(emptyImage: Image) {\n        const state = init();\n        state.emptyLifeImage = emptyImage;\n    }\n\n    //% block=\"set name to $name\"\n    //% blockId=\"profilelife_setName\"\n    //% name.defl=\"Bird\"\n    //% weight=75\n    export function setName(name: string) {\n        const state = init();\n        state.name = name;\n    }\n\n    //% block=\"set text color $textColor\"\n    //% textColor.shadow=\"colorindexpicker\"\n    //% blockId=\"profilelife_textColor\"\n    //% textColor.defl=12\n    //% weight=70\n    export function setTextColor(textColor: number) {\n        const state = init();\n        state.textColor = textColor;\n    }\n\n    //% block=\"set background $bkgd border $border\"\n    //% blockId=\"profilelife_bkgdColor\"\n    //% bkgd.shadow=\"colorindexpicker\"\n    //% bkgd.defl=1\n    //% border.shadow=\"colorindexpicker\"\n    //% border.defl=15\n    //% weight=65\n    export function setBackgroundBorder(bkgd: number, border: number) {\n        const state = init();\n        state.backgroundColor = bkgd;\n        state.borderColor = border\n    }\n\n    export function setFont(font: image.Font) {\n        if (!font) return;\n        const state = init();\n        state.font = font;\n    }\n\n    //% block=\"set max life $maxLife\"\n    //% blockId=\"profilelife_maxLife\"\n    //% maxLife.defl=3\n    //% weight=60\n    export function setMaxLife(maxLife: number) {\n        const state = init();\n        state.maxLife = maxLife;\n    }\n\n    //% block=\"set profile invisible $on\"\n    //% blockId=\"profilelife_invisibletoggle\"\n    //% on.shadow=\"toggleOnOff\"\n    //% on.defl=true\n    //% weight=50\n    export function setInvisible(on: boolean) {\n        const state = init();\n        state.invisible = on;\n    }\n}\n"}]}],"snapshots":[{"timestamp":1763502910372,"editorVersion":"2.0.62","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <variables></variables>\n  <block type=\"pxt-on-start\" x=\"0\" y=\"0\"></block>\n</xml>","main.ts":" ","README.md":" ","assets.json":"","pxt.json":"{\n    \"name\": \"elmer mudd\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"device\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"assets.json\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}},{"timestamp":1763584007314,"editorVersion":"2.0.62","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"music_playable_play\"><field name=\"playbackMode\">music.PlaybackMode.LoopingInBackground</field><value name=\"toPlay\"><shadow type=\"music_melody_playable\"><field name=\"melody\">music.baDing</field></shadow><block type=\"music_song_field_editor\"><field name=\"song\">hex`0078000408020403001c0001dc00690000045e010004000000000000000000000564000104000370000000040002191d0400080002191d08000c0002191d0c001000021b1e10001400021b1e14001800021d2018001c00021e221c002000021e2220002400021d2024002800021d2028002c00021b1e2c003000021b1e30003400021d2034003800021d2038003c00021d203c004000021e2206001c00010a006400f4016400000400000000000000000000000000000000024d000000040002222508000c000224270c0010000225291400180002252918001c000225292000240002242728002c000225292c00300002272a3400380002272a38003c0002272a3c00400002252907001c00020a006400f401640000040000000000000000000000000000000003600000000400011204000800011408000c0001140c001000011210001400011114001800010f18001c00010f1c002000011120002400011224002800011428002c0001142c003000011230003400011134003800010f38003c00010f3c004000011109010e02026400000403780000040a000301000000640001c80000040100000000640001640000040100000000fa0004af00000401c80000040a00019600000414000501006400140005010000002c0104dc00000401fa0000040a0001c8000004140005d0076400140005d0070000c800029001f40105c201f4010a0005900114001400039001000005c201f4010500058403050032000584030000fa00049001000005c201f4010500058403c80032000584030500640005840300009001049001000005c201f4010500058403c80064000584030500c8000584030000f40105ac0d000404a00f00000a0004ac0d2003010004a00f0000280004ac0d9001010004a00f0000280002d00700040408070f0064000408070000c80003c800c8000e7d00c80019000e64000f0032000e78000000fa00032c01c8000ee100c80019000ec8000f0032000edc000000fa0003f401c8000ea901c80019000e90010f0032000ea4010000fa0001c8000004014b000000c800012c01000401c8000000c8000190010004012c010000c80002c800000404c8000f0064000496000000c80002c2010004045e010f006400042c010000640002c409000404c4096400960004f6090000f40102b80b000404b80b64002c0104f40b0000f401022003000004200300040a000420030000ea01029001000004900100040a000490010000900102d007000410d0076400960010d0070000c80060000000010001130400050001130800090001110c000d0001111000110001111400150001121800190001131c001d0001142000210001142400250001142800290001122c002d00011130003100011134003500011038003900010f3c003d000114`</field><data>{\"commentRefs\":[],\"fieldData\":{\"song\":null}}</data></block></value></block></statement></block></xml>","main.ts":"music.play(music.createSong(hex`0078000408020403001c0001dc00690000045e010004000000000000000000000564000104000370000000040002191d0400080002191d08000c0002191d0c001000021b1e10001400021b1e14001800021d2018001c00021e221c002000021e2220002400021d2024002800021d2028002c00021b1e2c003000021b1e30003400021d2034003800021d2038003c00021d203c004000021e2206001c00010a006400f4016400000400000000000000000000000000000000024d000000040002222508000c000224270c0010000225291400180002252918001c000225292000240002242728002c000225292c00300002272a3400380002272a38003c0002272a3c00400002252907001c00020a006400f401640000040000000000000000000000000000000003600000000400011204000800011408000c0001140c001000011210001400011114001800010f18001c00010f1c002000011120002400011224002800011428002c0001142c003000011230003400011134003800010f38003c00010f3c004000011109010e02026400000403780000040a000301000000640001c80000040100000000640001640000040100000000fa0004af00000401c80000040a00019600000414000501006400140005010000002c0104dc00000401fa0000040a0001c8000004140005d0076400140005d0070000c800029001f40105c201f4010a0005900114001400039001000005c201f4010500058403050032000584030000fa00049001000005c201f4010500058403c80032000584030500640005840300009001049001000005c201f4010500058403c80064000584030500c8000584030000f40105ac0d000404a00f00000a0004ac0d2003010004a00f0000280004ac0d9001010004a00f0000280002d00700040408070f0064000408070000c80003c800c8000e7d00c80019000e64000f0032000e78000000fa00032c01c8000ee100c80019000ec8000f0032000edc000000fa0003f401c8000ea901c80019000e90010f0032000ea4010000fa0001c8000004014b000000c800012c01000401c8000000c8000190010004012c010000c80002c800000404c8000f0064000496000000c80002c2010004045e010f006400042c010000640002c409000404c4096400960004f6090000f40102b80b000404b80b64002c0104f40b0000f401022003000004200300040a000420030000ea01029001000004900100040a000490010000900102d007000410d0076400960010d0070000c80060000000010001130400050001130800090001110c000d0001111000110001111400150001121800190001131c001d0001142000210001142400250001142800290001122c002d00011130003100011134003500011038003900010f3c003d000114`), music.PlaybackMode.LoopingInBackground)\n","README.md":" ","assets.json":"","pxt.json":"{\n    \"name\": \"elmer mudd\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"device\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"assets.json\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}}],"shares":[],"lastSaveTime":1763584300323}